<<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>OTS Learning Portal</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- React and ReactDOM CDN -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

  <style>
    body {
      background: #0f111a;
      color: #f0f8ff;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
    }
    .video-wrapper {
      position: relative;
      padding-top: 56.25%;
    }
    .video-wrapper iframe {
      position: absolute;
      top: 0; left: 0; width: 100%; height: 100%;
      border: none;
    }
  </style>
</head>
<body class="min-h-screen p-6">
  <div id="root"></div>

  <script>
    const e = React.createElement;

    // Video data
    const videos = [
      {
        id: "intro-to-ots",
        title: "Introduction to Ozone Terraforming Swarm",
        description: "Overview of the OTS project and goals.",
        album: "Getting Started",
        tags: ["intro", "overview"],
        youtubeUrl: "https://www.youtube.com/embed/dQw4w9WgXcQ"
      },
      {
        id: "dashboard-walkthrough",
        title: "Dashboard Walkthrough",
        description: "How to use the OTS control dashboard.",
        album: "Getting Started",
        tags: ["dashboard", "usage"],
        youtubeUrl: "https://www.youtube.com/embed/3JZ_D3ELwOQ"
      },
      {
        id: "advanced-simulation",
        title: "Atmospheric Simulation Deep Dive",
        description: "Understanding the simulation modules and parameters.",
        album: "Advanced Topics",
        tags: ["simulation", "atmosphere"],
        youtubeUrl: "https://www.youtube.com/embed/5NV6Rdv1a3I"
      }
    ];

    // SearchBar component
    function SearchBar({ query, onChange }) {
      return e(
        "div",
        { className: "mb-4" },
        e("input", {
          type: "text",
          value: query,
          onChange: (e) => onChange(e.target.value),
          placeholder: "Search videos or albums...",
          className: "w-full p-2 rounded border border-gray-600 bg-gray-800 text-white"
        })
      );
    }

    // VideoCard component
    function VideoCard({ video, onSelect }) {
      return e(
        "div",
        {
          className:
            "bg-gray-800 p-4 rounded-lg shadow hover:shadow-lg cursor-pointer",
          onClick: () => onSelect(video)
        },
        e("h3", { className: "font-semibold text-lg mb-1" }, video.title),
        e("p", { className: "text-sm mb-2" }, video.description),
        e("div", { className: "text-xs text-gray-400" }, "Album: " + video.album)
      );
    }

    // AlbumFilter component
    function AlbumFilter({ albums, current, setAlbum }) {
      return e(
        "div",
        { className: "flex flex-wrap gap-2 mb-2" },
        e(
          "button",
          {
            className:
              "px-3 py-1 rounded " +
              (current === "" ? "bg-blue-600" : "bg-gray-700"),
            onClick: () => setAlbum("")
          },
          "All"
        ),
        albums.map((a) =>
          e(
            "button",
            {
              key: a,
              className:
                "px-3 py-1 rounded " +
                (current === a ? "bg-blue-600" : "bg-gray-700"),
              onClick: () => setAlbum(a)
            },
            a
          )
        )
      );
    }

    // VideoPlayer component
    function VideoPlayer({ video }) {
      if (!video) {
        return e(
          "div",
          {
            className:
              "bg-gray-800 p-6 rounded-lg flex items-center justify-center"
          },
          e("div", { className: "text-gray-400" }, "Select a video to begin")
        );
      }
      return e(
        "div",
        { className: "space-y-4" },
        e(
          "div",
          { className: "video-wrapper bg-black rounded overflow-hidden" },
          e("iframe", {
            title: video.title,
            src: video.youtubeUrl,
            allow:
              "accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",
            allowFullScreen: true
          })
        ),
        e(
          "div",
          null,
          e("h2", { className: "text-2xl font-bold" }, video.title),
          e("p", { className: "text-sm text-gray-300" }, video.description),
          e(
            "div",
            { className: "mt-1 text-xs text-gray-400" },
            "Album: " + video.album
          )
        )
      );
    }

    // LiveChat placeholder component
    function LiveChat() {
      const [open, setOpen] = React.useState(false);
      const [msg, setMsg] = React.useState('');
      const [sent, setSent] = React.useState(false);

      function submit(e) {
        e.preventDefault();
        console.log('User message:', msg);
        setSent(true);
        setMsg('');
      }

      return e(
        React.Fragment,
        null,
        e(
          "div",
          { className: "fixed bottom-6 right-6 z-50" },
          e(
            "button",
            {
              onClick: () => {
                setOpen(!open);
                setSent(false);
              },
              className: "bg-blue-600 text-white px-4 py-2 rounded-full shadow-lg"
            },
            open ? "Close" : "Help"
          )
        ),
        open &&
          e(
            "div",
            {
              className:
                "fixed bottom-20 right-6 w-80 bg-gray-900 text-white rounded-xl shadow-xl p-4 flex flex-col z-50"
            },
            e(
              "div",
              { className: "flex justify-between items-center mb-2" },
              e("div", { className: "font-bold" }, "Live Help"),
              e(
                "div",
                {
                  className: "cursor-pointer",
                  onClick: () => setOpen(false)
                },
                "âœ•"
              )
            ),
            sent
              ? e(
                  "div",
                  { className: "text-green-400" },
                  "Thanks! Your message was recorded."
                )
              : e(
                  "form",
                  { onSubmit: submit, className: "flex flex-col gap-2" },
                  e("textarea", {
                    "aria-label": "Type your question",
                    value: msg,
                    onChange: (e) => setMsg(e.target.value),
                    placeholder: "Type your question...",
                    className:
                      "w-full h-24 bg-gray-800 rounded p-2 resize-none",
                    required: true
                  }),
                  e(
                    "button",
                    {
                      type: "submit",
                      className:
                        "bg-green-500 hover:bg-green-600 transition rounded px-4 py-2"
                    },
                    "Send"
                  )
                ),
            e(
              "div",
              { className: "mt-2 text-xs text-gray-400" },
              "Placeholder help widget. Hook this to a backend/email later."
            )
          )
      );
    }

    // Main App
    function App() {
      const [query, setQuery] = React.useState('');
      const [filterAlbum, setFilterAlbum] = React.useState('');
      const [selectedVideo, setSelectedVideo] = React.useState(null);

      const filtered = videos.filter((v) => {
        if (filterAlbum && v.album !== filterAlbum) return false;
        if (!query) return true;
        const q = query.toLowerCase();
        return (
          v.title.toLowerCase().includes(q) ||
          v.description.toLowerCase().includes(q) ||
          v.tags.some((t) => t.toLowerCase().includes(q))
        );
      });

      const albums = Array.from(new Set(videos.map((v) => v.album)));

      return e(
        "div",
        { className: "min-h-screen" },
        e(LiveChat),
        e(
          "div",
          { className: "max-w-7xl mx-auto p-6" },
          e(
            "header",
            { className: "mb-6" },
            e("h1", { className: "text-3xl font-bold mb-1" }, "OTS Learning Portal"),
            e(
              "p",
              { className: "text-gray-300" },
              "Free video albums, search, and live help."
            )
          ),
          e(
            "div",
            { className: "grid grid-cols-1 lg:grid-cols-3 gap-6" },
            e(
              "div",
              { className: "lg:col-span-2 space-y-4" },
              e(SearchBar, { query, onChange: setQuery }),
              e(AlbumFilter, {
                albums,
                current: filterAlbum,
                setAlbum: setFilterAlbum
              }),
              e(
                "div",
                null,
                filtered.map((v) =>
                  e(VideoCard, {
                    key: v.id,
                    video: v,
                    onSelect: setSelectedVideo
                  })
                )
              )
            ),
            e(
              "div",
              { className: "space-y-4" },
              e(VideoPlayer, { video: selectedVideo })
            )
          )
        )
      );
    }

    ReactDOM.createRoot(document.getElementById("root")).render(e(App));
  </script>
</body>
</html>
